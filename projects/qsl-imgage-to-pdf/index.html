<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[AE0S] QSL Cards: Image to PDF</title>
    <meta name="description" content="Offial page of the amateur radio (ham) station AE0S featuring experiments, projects, publications, blog and station information">
    <meta name="google-site-verification" content="dv5RKiVqsej9VWfRGw1rU6y43fp3Spg9ULgLUUZQLtQ" />
    <meta name="msvalidate.01" content="36B677FC5749023331AF1AAD8126392C" />
    <meta name="yandex-verification" content="5e1f5584e6f19e04" />
    <script src="/lib/jquery-3.6.0.min.js" type="text/javascript"></script>
    <script src="/menu/script.js" type="text/javascript"></script>
    <script src="/script.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="/menu/style.css" />
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link href="https://fonts.googleapis.com/css?family=Allerta" rel="stylesheet"> 
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TSTBPZ3MJP"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-TSTBPZ3MJP');
    </script>
  </head>

  <body>
    <div id="upper_left">
      <div class="call_sign">AE0S</div>
      <div class="amateur_station">Amateur Radio Station</div>
    </div>
    
    <div id="upper_right">
      <div class="call_sign">AE0S</div>
      <div class="amateur_station">Amateur Radio Station</div>
    </div>
    
    <div class="menu-container">
      <div class="menu-image fade" data-menu="home">
        <img src="/menu/home.png">
      </div>
      <div class="menu-image fade" data-menu="qsl" style="display:none">
        <img src="/menu/qsl.png">
      </div>
      <div class="menu-image fade" data-menu="antennas" style="display:none">
        <img src="/menu/antennas.png">
      </div>
      <div class="menu-image fade" data-menu="station" style="display:none">
        <img src="/menu/station.png">
      </div>
      <div class="menu-image fade" data-menu="projects" style="display:none">
        <img src="/menu/projects.png">
      </div>
      <div class="menu-image fade" data-menu="publications" style="display:none">
        <img src="/menu/publications.png">
      </div>
      <div class="menu-image fade" data-menu="journal" style="display:none">
        <img src="/menu/journal.png">
      </div>
      <br />
      <div style="text-align:center">
        <a class="menu-button" data-menu="home" href="/">Home</a>
        <a class="menu-button" data-menu="qsl" href="/qsl/">QSL</a>
        <a class="menu-button" data-menu="antennas" href="/antennas/">Antennas</a>
        <a class="menu-button" data-menu="station" href="/station/">Station</a>
        <a class="menu-button" data-menu="projects" href="/projects/">Projects</a>
        <a class="menu-button" data-menu="publications" href="/publications/">Publication</a>
        <a class="menu-button" data-menu="journal" href="/journal/">Journal</a>
      </div>
    </div>

    <hr />
    <div id="content-container">
    
    <h3 class="status-completed">QSL Cards: Image to PDF</h3>
    <p>
      Create a PDF file with 4 QSL card images to print and cutout yourself.  
    </p>
    <ul>
      <lh>Instructions:</lh>
      <li>Create an image file of your QSL card.  The image must be in a 5.5 x 3.5 inch ratio.  A 300 dpi image is recommended which gives a dimention of 1650 x 1050 pixles.  The image can be a jpeg, or png.</li>
	  <li>Print on a US letter sized paper.  Card stock is recommended.  The A4 paper size is not supported.
      <li>Using a paper cutter, cut 3.5 inches from the top to get the first row of the QSL cards.  Cut again at 3.5 inches to get the second row of QSL cards.  Cut each row in half at 5.5 inches.
    </ul>

    <!-- Image upload input -->
    <input type="file" id="imageInput" accept="image/*" />

    <!-- Button to generate PDF -->
    <button id="generatePdf">Generate PDF</button>

    <script>
    // Wait for the DOM to be ready before attaching event listeners
    document.getElementById('generatePdf').addEventListener('click', function () {
      const inputFile = document.getElementById('imageInput');
      if (inputFile.files.length === 0) {
        alert("Please select an image first!");
        return;
      }

      // Check that only one image is selected
      if (inputFile.files.length !== 1) {
        alert("Please select only one image!");
        return;
      }

      const file = inputFile.files[0];

      // Check if the selected file is an image
      if (!file.type.startsWith('image/')) {
        alert(`Not an image file!`);
        return;
      }

      const reader = new FileReader();
      
      reader.onload = function (event) {
        const img = new Image();
        img.onload = function () {
          // Check if the image dimensions match the required size
          if (img.width / img.height !== 5.5 / 3.5) {
            alert(`The image must have dimensions of 5.5 x 3.5 inches (e.g. 1650 x 1050 pixles at 300 dpi).`);
            return;
          }

          const { jsPDF } = window.jspdf;
          // Create PDF in landscape orientation and Letter size (8.5 x 11 inches)
          const pdf = new jsPDF('landscape', 'in', 'letter'); 
          
          // Add the image to the PDF
          pdf.addImage(img, 'JPEG', 0.0, 0.0, 5.5, 3.5); 
          pdf.addImage(img, 'JPEG', 5.5, 0.0, 5.5, 3.5); 
          pdf.addImage(img, 'JPEG', 0.0, 3.5, 5.5, 3.5); 
          pdf.addImage(img, 'JPEG', 5.5, 3.5, 5.5, 3.5); 

          // Save the PDF
          pdf.save('qsl-cards.pdf');
        }
        img.src = event.target.result;
      }
      
      reader.readAsDataURL(file);
    });
    </script>

    </div>
  </body>
</html>
